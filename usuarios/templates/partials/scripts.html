<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
<script>
    // Função para atualizar cidades baseado no estado selecionado
    document.addEventListener('DOMContentLoaded', function() {
        const estadoSelect = document.querySelector('select[name="estado"]');
        const cidadeSelect = document.querySelector('select[name="cidade"]');

        if (estadoSelect && cidadeSelect) {
            estadoSelect.addEventListener('change', function() {
                const estadoId = this.value;
                cidadeSelect.innerHTML = '<option value="">Selecione uma cidade</option>';
                
                if (estadoId) {
                    fetch(`/get-cidades/?estado_id=${estadoId}`)
                        .then(response => response.json())
                        .then(data => {
                            data.cidades.forEach(cidade => {
                                const option = document.createElement('option');
                                option.value = cidade.id;
                                option.textContent = cidade.nome;
                                cidadeSelect.appendChild(option);
                            });
                        });
                }
            });
        }
    });
</script>